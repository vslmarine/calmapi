<nz-page-header class="site-page-header" [nzTitle]="idForUpdate ? 'Update Report' : 'Add New Report'">
    <nz-page-header-extra>
        <button *ngIf="!editForm" nz-button [nzLoading]="buttonLoading" (click)="draft()" nzType="primary"
            class="btncls">
            Save as Draft
        </button>
        <div *ngIf="showCustomPopOver" class="customPopConfirm customPopOverTop">
            <div class="customPopOverText">
                Are you sure? (Highlighted fields are empty or invalid)
            </div>
            <div class="customPopOverBtns">
                <button (click)="showCustomPopOver = false" class="customPopOverActionBtn">Cancel</button>
                <button (click)="submit()" class="customPopOverActionBtn">Save</button>
            </div>
        </div>
        <button nz-button [nzLoading]="buttonLoading" (click)="highlightInvalidFields()" nzType="primary"
            class="btncls">Save</button>
        <a routerLink="/main">
            <button nz-button [nzLoading]="buttonLoading" class="btncls">Back</button>
        </a>
    </nz-page-header-extra>
</nz-page-header>

<form class="noonForm" nz-form [formGroup]="MODULE_COMPONENT_FORM">
    <div nz-row [nzGutter]="16">
        {{#each html }}
        <div nz-col class="gutter-row" [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24">
            {{#with (lookup this '0') as |firstItem|}}
            {{#if (eq unit 1)}}
            <div nz-row class="gutter-row" [nzGutter]="16">
            <div nz-col formArrayName="InspectionData" [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                <nz-tabset  [nzTabBarStyle]="customCompInfoTabsPlacement" [(nzSelectedIndex)]="tabUnit" (nzSelectChange)="tabChange($event)" nzType="card">
                <div nz-col *ngFor="let eachData of this.InspectionDataArray.controls; let i=index" [formGroupName]="i" [nzLg]="24" [nzMd]="24" [nzSm]="24" [nzXs]="24" class="halfRow">
                    <nz-tab nzTitle="Unit \{{i + 1}}">
            {{/if}}
            {{/with}}
            <nz-card nzTitle="{{@key}}">
                <div nz-row [nzGutter]="16">

                {{#each this}}
                {{#if (eq unit null)}}
                
                    {{#if (eq formKey.length 1)}}
                    <div nz-col class="gutter-row noPadding" [nzLg]="12" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                        <nz-form-item>
                            <nz-form-label [nzLg]="8" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                {{this.labelName}}
                            </nz-form-label>
                            <nz-form-control class="halfFormOneIp" [nzLg]="14" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                <{{this.tagName.[0]}} formControlName="{{this.formKey.[0]}}" {{{joinAttributes this.attributes.[0]}}} {{{tagEnding this.tagName.[0] this.formKey.[0]}}}
                            </nz-form-control>
                        </nz-form-item>
                    </div>
                    {{else}}
                    <div nz-col class="gutter-row noPadding" [nzLg]="12" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                        <div nz-col [nzLg]="24" class="halfRow">
                            <div nz-col class="gutter-row noPadding" [nzLg]="14" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                <nz-form-item>
                                    <nz-form-label [nzLg]="14" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                        {{this.labelName}}
                                    </nz-form-label>
                                    <nz-form-control [nzLg]="10" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                        <{{this.tagName.[0]}} class="halfRowFirstIp"
                                            formControlName="{{this.formKey.[0]}}" style="width: 100%" {{{joinAttributes this.attributes.[0]}}} {{{tagEnding this.tagName.[0] this.formKey.[0]}}}
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col class="gutter-row onlyLeftPaddingAdj" [nzLg]="10" [nzMd]="24" [nzSm]="24"
                                [nzXs]="24">
                                <nz-form-item>
                                    <nz-form-control [nzLg]="20" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                        <{{this.tagName.[1]}} formControlName="{{this.formKey.[1]}}" style="width: 100%"
                                            {{{joinAttributes this.attributes.[1]}}} {{{tagEnding this.tagName.[1] this.formKey.[1]}}}
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                    </div>
                    {{/if}}
                {{else}}
                
                    {{#if (eq formKey.length 1)}}
                    <div nz-col class="gutter-row noPadding" [nzLg]="12" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                        <nz-form-item>
                            <nz-form-label [nzLg]="8" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                {{this.labelName}}
                            </nz-form-label>
                            <nz-form-control class="halfFormOneIp" [nzLg]="14" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                <{{this.tagName.[0]}} formControlName="{{this.formKey.[0]}}" {{{joinAttributes this.attributes.[0]}}} {{{tagEnding this.tagName.[0] this.formKey.[0]}}}
                            </nz-form-control>
                        </nz-form-item>
                    </div>
                    {{else}}
                    <div nz-col class="gutter-row noPadding" [nzLg]="12" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                        <div nz-col [nzLg]="24" class="halfRow">
                            <div nz-col class="gutter-row noPadding" [nzLg]="14" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                <nz-form-item>
                                    <nz-form-label [nzLg]="14" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                        {{this.labelName}}
                                    </nz-form-label>
                                    <nz-form-control [nzLg]="10" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                        <{{this.tagName.[0]}} class="halfRowFirstIp"
                                            formControlName="{{this.formKey.[0]}}" style="width: 100%" {{{joinAttributes this.attributes.[0]}}} {{{tagEnding this.tagName.[0] this.formKey.[0]}}}
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                            <div nz-col class="gutter-row onlyLeftPaddingAdj" [nzLg]="10" [nzMd]="24" [nzSm]="24"
                                [nzXs]="24">
                                <nz-form-item>
                                    <nz-form-control [nzLg]="20" [nzMd]="24" [nzSm]="24" [nzXs]="24">
                                        <{{this.tagName.[1]}} formControlName="{{this.formKey.[1]}}" style="width: 100%"
                                            {{{joinAttributes this.attributes.[1]}}} {{{tagEnding this.tagName.[1] this.formKey.[1]}}}
                                    </nz-form-control>
                                </nz-form-item>
                            </div>
                        </div>
                    </div>
                    {{/if}}
                {{/if}}
                {{/each}}
                </div>
            </nz-card>
            {{#with (lookup this '0') as |firstItem|}}
            {{#if (eq unit 1)}}
                <nz-divider></nz-divider>

                </nz-tab>
                </div>
                </nz-tabset>
            </div>
            </div>
            {{/if}}
            {{/with}}
        </div>

        <nz-divider></nz-divider>

        {{/each}}
    </div>
</form>


<div nz-row nzJustify="end" class="btnAdjust">

    <button *ngIf="!editForm" nz-button [nzLoading]="buttonLoading" (click)="draft()" style="margin-right: 12px"
        nzType="primary" class="btncls">
        Save as Draft
    </button>

    <div *ngIf="showCustomPopOver" class="customPopConfirm customPopOverButtom">
        <div class="customPopOverText">
            Are you sure? (Highlighted fields are empty or invalid)
        </div>
        <div class="customPopOverBtns">
            <button (click)="showCustomPopOver = false" class="customPopOverActionBtn">Cancel</button>
            <button (click)="submit(); showCustomPopOver = false" class="customPopOverActionBtn">Save</button>
        </div>
    </div>

    <button nz-button [nzLoading]="buttonLoading" (click)="highlightInvalidFields()" style="margin-right: 12px"
        nzType="primary" class="btncls">Save</button>
    <a routerLink="/main">
        <button nz-button nzType="primary" [nzLoading]="buttonLoading" class="btncls">Back</button>
    </a>
</div>